const express = require('express');
const app = express();
const apiKey = process.env.MAILCHIMP_API_KEY; // Set this in your environment variables

app.get('/get-api-key', (req, res) => {
    res.json({ apiKey: apiKey });
});

app.listen(3000, () => {
    console.log('Server running on port 3000');
});

html:
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mailchimp Form</title>
</head>
<body>
    <form id="mailchimpForm">
        <!-- Your form fields here -->
        <button type="submit">Submit</button>
    </form>

    <script>
        document.getElementById('mailchimpForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const response = await fetch('/get-api-key');
            const data = await response.json();
            const apiKey = data.apiKey;

            // Use the API key to submit the form data to Mailchimp
            // Example: fetch('https://api.mailchimp.com/3.0/lists', {
            //     method: 'POST',
            //     headers: {
            //         'Authorization': `apikey ${apiKey}`,
            //         'Content-Type': 'application/json'
            //     },
            //     body: JSON.stringify({
            //         // Your form data here
            //     })
            // });
        });
    </script>
</body>
</html>

